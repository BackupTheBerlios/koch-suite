<!-- $Id: such.raw,v 1.12 2001/05/23 00:07:11 michael Exp $ -->
<?
  $begriff = $HTTP_POST_VARS["begriff"];
  $all     = $HTTP_POST_VARS["all"];

  if (empty($begriff) and empty($all)) {
?>
    <h2><? echo $Lang['Search']['Search']; ?></h2>
    <script language="JavaScript1.2">
      <!--
        function kat() {
          foo = "kategorien.php?target=begriff&maxsel=1";
          window.open(foo, 'kat', 'width=300,height=400,screenX=700,screenY=300,scrollbars=yes');
          document.forms[0].where.options[1].selected = true;
        }
      //-->
    </script>
    
    <form action="<? echo "$PHP_SELF?suchen=1"; ?>" method="post">
      <table border=0>
        <tr>
          <td><? echo $Lang['Search']['For']; ?></td>
          <td><input type="text" name="begriff" value="<? echo $begr ?>">
        </tr>
        <tr>
          <td><? echo $Lang['Search']['In']; ?></td>
          <td><select name="where">
                <option value="title"><? echo $Lang['Search']['Menutitle']; ?></option>
                <option value="cat" <? if ($begr != '') echo 'selected' ?>><? echo $Lang['Search']['Categories']; ?></option>
                <option value="ingred"><? echo $Lang['Search']['Ingredients']; ?></option>
              </select>
          </td>
        </tr>
      </table>
    <input type="submit" value="<? echo $Lang['Search']['Go']; ?>">
    <input type="reset" value="<? echo $Lang['Delete']; ?>">
    </form>
    <p>
      [<a href="<? echo "$PHP_SELF?suchen=1&all=1"; ?>"><? echo $Lang['AllRecipes']; ?></a>]
      [<a href="kategorien.php?target=begriff&maxsel=1" target="kat" onClick="kat();"><? echo $Lang['CatChoose']; ?></a>]
      <br>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=a"; ?>">A</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=b"; ?>">B</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=c"; ?>">C</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=d"; ?>">D</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=e"; ?>">E</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=f"; ?>">F</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=g"; ?>">G</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=h"; ?>">H</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=i"; ?>">I</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=j"; ?>">J</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=k"; ?>">K</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=l"; ?>">L</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=m"; ?>">M</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=n"; ?>">N</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=o"; ?>">O</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=p"; ?>">P</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=q"; ?>">Q</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=r"; ?>">R</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=s"; ?>">S</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=t"; ?>">T</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=u"; ?>">U</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=v"; ?>">V</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=w"; ?>">W</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=x"; ?>">X</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=y"; ?>">Y</a>
      <a class="prop" href="<? echo "$PHP_SELF?suchen=1&all=z"; ?>">Z</a>
    </p>

<?
  } else {
?>
    <h2><? echo $Lang['Search']['Result']; ?>:
      <? 
         if (empty($all)) { 
           echo $begriff;
         } 
      ?> 
    </h2>

    <table border=0>
<?

    function print_titles($r) {
      $count = 0;
      foreach ($r as $foo) {
        $count++;
        echo "<tr><td>$count</td>" .
                 "<td><a href=\"rezept.php?mid=" . $foo["id"] . "\">" . 
                 htmlentities($foo["title"]) . "</a></td></tr>\n";
      }
    }


    if ($where == 'title' or $where == '') {
      if ($begriff != "") {
        $r = get_mid_by_name("$begriff");
      } else {
        if ($all == 1) {
          $all = "";
        }
        $r = get_mid_by_name("$all", 1);
      }
      print_titles($r);

    } else if ($where == 'ingred') {
      if (($m = get_mid_by_ingred($begriff)) != 0) {
        print_titles($m);
      }
    } else if ($where == 'cat') {
      if ($m = get_mid_by_cat($begriff)) {
        print_titles($m);
      } else {
        echo "<tr><td>" . $Lang['Search']['NoResult']. "</td></tr>\n";
      }
    }
?>
    </table>
<?
  }
?>
