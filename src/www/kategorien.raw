<?php
  /**
   * Category-chooser
   *
   * $Id: kategorien.raw,v 1.9 2001/06/27 13:15:07 michael Exp $
   * Michael Lestinsky <michael@lestinsky.de>
   *
   * @package WWW
   * @modulegroup UI
   * @module kategorien
   */

    require_once "<%%PHP_LIBS%%>/config.inc";
    require_once "<%%PHP_LIBS%%>/functions.inc";
    require_once "<%%PHP_LIBS%%>/lang.inc";

    $target = $HTTP_GET_VARS["target"];
    $kategorie = $HTTP_GET_VARS["kategorie"];
    $maxsel    = $HTTP_GET_VARS["maxsel"];
    if (isset($HTTP_SERVER_VARS["PHP_SELF"])) 
      $PHP_SELF = $HTTP_SERVER_VARS["PHP_SELF"];
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>

<head>
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <link rev="made" href="mailto:michael@zaphod.rhein-neckar.de" />

  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta http-equiv="Content-Style-Type" content="text/css">

  <title><?php echo $Lang['Category']['Title']; ?></title>

  <script language="JavaScript1.2">
  <!--
    function eintragen ( name ) {
      <? if ($maxsel != 1) { ?>
      if ( opener.document.forms[0].<? echo $target ?>.value == '' ) {
        opener.document.forms[0].<? echo $target ?>.value = name;
      } else {
        opener.document.forms[0].<? echo $target ?>.value += ', ' + name;
      }
      <? } else { ?>
      opener.document.forms[0].<? echo $target ?>.value = name;
      window.close();
      <? } ?>
    }
  //-->
  </script>

</head>

<body>
<a name="top"><h2><?php echo $Lang['CatChoose']; ?></h2></a>

<p>
<?php echo $Lang['Category']['Help']; ?>
</p>

<form>
  <input type="button" value="<?php echo $Lang['Close']; ?>" onClick="window.close()">
</form>

<table border="0" cellspacing="2" cellpadding="0">
  <?php
    $kat = get_categories();

    foreach ($kat as $kategorie) {
      if ($maxsel == 1) {
        echo "<tr><td><a href=\"index.php?suchen=1&target=$target&begr=$kategorie\" onClick=\"eintragen('" . $kategorie . "');\">$kategorie</a></td></tr>\n";
      } else {
        echo "<tr><td><a name=\"$kategorie\" href=\"$PHP_SELF?target=$target#$kategorie\" onClick=\"eintragen('" . $kategorie . "');\">$kategorie</a></td></tr>\n";
      }
    }
  ?>

</table>

<form>
  <input type="button" value="<?php echo $Lang['Close']; ?>" onClick="window.close()">
</form>

</body>
</html>
<?db_disconnect();?>
