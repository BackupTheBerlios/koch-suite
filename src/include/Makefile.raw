#!/usr/bin/make

# This file contains the substitution-rules for "sed"

# Space-separated list of all "raw" php-files.
PHP_FILES_UNCONF=	config functions output
SUBDIRS=		

CONF_FILE=		../config.sed

all: build
	@#make subdir TRGT=all

build: ${PHP_FILES_UNCONF}

${PHP_FILES_UNCONF}: ${PHP_FILES_UNCONF:C,$,.raw}
	sed -f ${CONF_FILE} ${@}.raw > ${@}.inc

${PHP_FILES_UNCONF:C,$,.raw}:

subdir:
	@(for i in ${SUBDIRS} ; do\
	echo "====> ${THISDIR}/$$i";\
	cd $$i; \
	${MAKE} ${TRGT} THISDIR=${THISDIR}/$$i; \
	echo "<==== ${THISDIR}";\
	done )

clean:
	@#make subdir TRGT=clean
	rm -f *.php
	rm -f *.inc
	rm -f *.gen

distclean:

install:
	( [ -d "<%%PHP_LIBS%%>" ] || \
	install -d -g <%%GROUP%%> -m 0755 -o <%%OWNER%%> <%%PHP_LIBS%%> )
	@( for i in ${PHP_FILES_UNCONF} ; do \
	install -c -g <%%GROUP%%> -m 0644 -o <%%OWNER%%> $$i.inc <%%PHP_LIBS%%>; \
	echo "install -c -g <%%GROUP%%> -m 0644 -o <%%OWNER%%> $$i.inc <%%PHP_LIBS%%>" ; \
	done )
