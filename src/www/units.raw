<?
  /* Copyright (c) 2001
   *      Michael Lestinsky. All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions
   * are met:
   * 1. Redistributions of source code must retain the above copyright
   *    notice, this list of conditions and the following disclaimer.
   * 2. Redistributions in binary form must reproduce the above copyright
   *    notice, this list of conditions and the following disclaimer in the
   *    documentation and/or other materials provided with the distribution.
   * 3. All advertising materials mentioning features or use of this software
   *    must display the following acknowledgement:
   *      This product includes software developed by Michael Lestinsky.
   *
   * THIS SOFTWARE IS PROVIDED BY MICHAEL LESTINSKY ``AS IS'' AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   * ARE DISCLAIMED.  IN NO EVENT SHALL MICHAEL LESTINSKY BE LIABLE
   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   * SUCH DAMAGE.
   */

  require "<%%ETC_PREFIX%%>/koch-suite.inc";
  require "<%%PHP_LIBS%%>/functions.inc";
  require "<%%PHP_LIBS%%>/lang.inc";
  include "<%%PHP_LIBS%%>/auth.inc";

  auth(READ);

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>

<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rev="made" href="mailto:michael@zaphod.rhein-neckar.de">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Koch-Suite</title>
  <!-- $Id: units.raw,v 1.8 2001/09/24 21:20:23 lestinsky Exp $ -->
  <style class="text/css">
  <!--
    .dark  { background-color:#c0c0d5; font-family:Helvetica,Arial; }
    .light { background-color:#e9e9f0; }
    .small { font-size:small; }
  //-->
  </style>
</head>

<body>
<a name="top"></a>
<h1><? echo $Lang['UnitInfo']['Title']; ?></h1>

<form>
<input type="button" value="<? echo $Lang['Close']; ?>" onClick="window.close()">
</form>

<center>
<table border="0" cellspacing="0" cellpadding="1">
  <tr>
    <td style="background-color:#9090b0;">
      <table border="0" cellspacing="1" cellpadding="3">
<?
  $units = get_units();

  function td ($str) {
    if ($str != "") {
      return "<td class=\"light\">" . $str . "</td>";
    } else {
      return "<td class=\"light\">&nbsp;</td>";
    }
  }

  function th ($str) {
    return "<td class=\"dark\">" . $str . "</td>";
  }

  function edit_alias ($unit) {
    /* Create a link to the alias-editor for $unit */

    global $Lang;

    return "<span class=\"small\">[<a href=\"edit_alias.php?unit=$unit\">" . $Lang['Edit'] . "</a>]</span>";
  }


  echo "<tr>" .
	 th("MM") .
	 th("RK") .
         th($Lang['Text']) . 
	 th($Lang['Description']) . 
	 th($Lang['Alias']) . 
       "</tr>\n";

  foreach ($units as $u) {
    $vals = $u["unit"];
    $aliases = $u["aliases"];

    echo "<tr>" . 
	   td($vals["abbrev"]) .
	   td($vals["rk_abbrev"]) .
	   td($vals["text"]) . 
	   td($vals["descr"]) . 
	   td(implode($aliases, " ") . " " .edit_alias($vals["abbrev"])) .
         "</tr>\n";
  }

?>
      </table>
    </td>
  </tr>
</table>
</center>

<dl>
  <dt>MM:</dt>
    <dd><?php echo $Lang['UnitInfo']['MMText']; ?></dd>
  <dt>RK:</dt>
    <dd><?php echo $Lang['UnitInfo']['RKText']; ?></dd>
</dl>

<form>
  <input type="button" value="<? echo $Lang['Close']; ?>" onClick="window.close()">
</form>

<hr noshade>
&copy; Michael Lestinsky 
&lt;<a
href="mailto:michael@zaphod.rhein-neckar.de">michael@zaphod.rhein-neckar.
de</a>&gt; 
2001.
</body>
</html>

<?db_disconnect();?>
