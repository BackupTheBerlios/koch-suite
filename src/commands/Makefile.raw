#!/usr/bin/make

# This file contains the substitution-rules for "sed"

# Space-separated list of all "raw" php-files.
PHP_FILES_UNCONF=	mmimport mmexport rezept2latex

SUBDIRS=		""

all:
	@#make subdir TRGT=all
	@(for i in ${PHP_FILES_UNCONF}; do\
	echo "$${i}.raw --> $$i"; \
	cat $${i}.raw | sed -f ${CONF_FILE} > $$i;\
	chmod +x $${i} ; \
	done)

subdir:
	@(for i in ${SUBDIRS} ; do\
	echo "====> ${THISDIR}/$$i";\
	cd $$i; \
	${MAKE} ${TRGT} CONF_FILE=${CONF_FILE} THISDIR=${THISDIR}/$$i; \
	echo "<==== ${THISDIR}";\
	done )

clean:
	@#make subdir TRGT=clean
	@( for i in "${PHP_FILES_UNCONF}" ; do \
	echo "rm $${i}"; \
	rm $${i}; \
	done)

distclean:

install:
	( [ -d "<%%SCRIPT_PREFIX%%>" ] || \
	install -d -g <%%GROUP%%> -m 0755 -o <%%OWNER%%> <%%SCRIPT_PREFIX%%> )
	@( for i in ${PHP_FILES_UNCONF} ; do \
	install -c -g <%%GROUP%%> -m 0755 -o <%%OWNER%%> $$i <%%SCRIPT_PREFIX%%>; \
	echo "install -c -g <%%GROUP%%> -m 0644 -o <%%OWNER%%> $$i <%%SCRIPT_PREFIX%%>" ; \
	done )

.PHONY: all subdir clean distclean install 
